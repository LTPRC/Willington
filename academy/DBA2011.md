# DBA201 - Redis - 基本概念

返回[Bulletin](./bulletin.md)

返回[DBA201 - Redis](./DBA201.md)

[TOC]

## 非关系型数据库### 定义<img src="./icons/citic.gif" />
NoSQL, 全称Not Only SQL, 泛指非关系型数据库，存储数据的方式和关系型数据库不一样，一度成为高并发、海量数据存储解决方案的代名词。### 文档数据库 MongoDB<img src="./icons/bytedance.gif" /><img src="./icons/citic.gif" />MongoDB是一种文档数据库，是一种介于关系型数据库和非关系型数据库之间的产品，是非关系型数据库中功能最丰富、最像关系型数据库的，是对传统关系型数据库的补充。 MongoDB非常适合高伸缩性的场景，可扩展性的表结构可以将不同结构的文件存储在同一个数据库里。 如果用MongoDB存储数据量特别大的日志数据，利用分片集群支持海量数据，同时使用聚集分析和MapReduce的能力，是个很好的选择。 MongoDB还适合存储大尺寸的数据，GridFS存储方案就是基于MongoDB的分布式文件存储系统。### 列族数据库 HBase
HBase适合海量数据的存储与高性能实时查询，它是运行于HDFS文件系统之上，并且作为MapReduce分布式处理的目标数据库，以支撑离线分析型应用。在数据仓库、数据集市、商业智能等领域发挥了越来越多的作用，在数以千计的企业中支撑着大量的大数据分析场景的应用。### 全文搜索引擎 ElasticSearch在一般情况下，关系型数据库的模糊查询，都是通过like的方式进行查询。其中，like "value%" 可以使用索引，但是对于like "%value%"这样的方式，执行全表查询，这在数据量小的表，不存在性能问题，但是对于海量数据，全表扫描是非常可怕的事情。ElasticSearch 作为一个建立在全文搜索引擎Apache Lucene基础上的实时的分布式搜索和分析引擎，适用于处理实时搜索应用场景。此外，使用ElasticSearch全文搜索引擎，还可以支持多词条查询、匹配度与权重、自动联想、拼写纠错等高级功能。因此，可以使用ElasticSearch作为关系型数据库全文搜索的功能补充，将要进行全文搜索的数据缓存一份到ElasticSearch上，达到处理复杂的业务与提高查询速度的目的。ElasticSearch不仅仅适用于搜索场景，还非常适合日志处理与分析的场景。著名的ELK日志处理方案，由ElasticSearch, Logstash和Kibana三个组件组成，包括了日志收集、聚合、多维度查询、可视化显示等。### Redis<img src="./icons/netease.gif" />奥萨医药<img src="./icons/citic.gif" /><img src="./icons/bbbbzxlb.gif" /><img src="./icons/mashibing.gif" />

Redis (Remote Dictionary Server) 本质上是一个 Key-Value 类型的内存数据库，整个数据库统统加载在内存当中进行操作，定期通过异步操作把数据库数据flush到硬盘上进行保存。Redis是开源NoSQL数据库，目前由VMware主持开发工作。

#### 应用场景

- 五大value类型。
- Redis适用于数据变化快且数据库大小可遇见（适合内存容量）的应用程序。可以使用Redis作为一个缓存服务器，基本没有使用Redis进行存储的。
- 用于实现服务无状态。可以在单机环境中实现单机锁，或者在多机环境中实现分布式锁。
- Redis单线程串行执行，可以实现系统的无锁化。

#### 优点

- 高性能：使用C编写，因为是纯内存操作，Redis的性能非常出色，读写速度几乎没有区别，每秒可以处理超过10万次读写操作，是已知性能最快的Key-Value DB.
- 数据结构化：Redis最大的魅力是支持保存多种数据结构。Redis提供了一个高效的数据结构扩展，因此它有时也被称为数据结构服务器。
- 事务功能：Redis提供了事务的功能，可以保证一串命令的原子性，中间不会被任何操作打断。
- PUB/SUB: 支持发布与订阅。
- 主从复制：Redis支持master-slave模式的数据备份。
- 持久化：可以将内存中的数据保存到磁盘中，重启的时候可以再次加载原数据。
- 过期时间：另外Redis也可以对存入的Key-Value设置expire时间，因此也可以被当作一个功能加强版的memcached来用。

#### 缺点

- 数据库容量受到物理内存的限制，不能用作海量数据的高性能读写，因此Redis适合的场景主要局限在较小数据量的高性能操作和运算上。
- 事务中任一命令有语法错误或key-value数据类型错误，事务照常运行。
- 数据结构不支持嵌套其他数据结构，比如类型为list的value不能再嵌套一个list.
- 单线程模型处理所客户请求的命令。对高并发支持不是很好。
- 主从做冗余备份时，主机迭机后，不能从多个从机中自动选举出主机。

### Memcached<img src="./icons/citic.gif" />Memcached数据缓存服务器，也是Key-Value类型的数据库，提供的命令形式极为接近。

#### Redis VS Memcache<img src="./icons/pingan.gif" /><img src="./icons/netease.gif" /><img src="./icons/mashibing.gif" /><img src="./icons/citic.gif" />存储方式 Redis支持master-slave主从复制；支持数据持久化。 Memecached不支持主从复制；把数据全部存在内存之中，断电后会挂掉，数据不能超过内存大小。 数据支持类型 Redis支持更为丰富的数据类型，提供list, set, zset, hash等数据结构的存储，以及不同类型可以调用的方法。 Memcached所有的值均是简单的字符串，没有类型的概念。 底层模型 底层实现方式以及服务端客户端之间通信的应用协议不一样。Redis自己构建了VM机制，避免了一般系统中浪费一定的时间去移动和请求。 Value值大小 Redis最大可以达到512M。 Memcached只有1mb。 Redis单个value的最大限制远大于Memcached，因此Redis可以用来实现很多有用的功能，比方说用他的List来做FIFO双向链表，实现一个轻量级的高性能消息队列服务，用他的Set可以做高性能的tag系统等等。 速度 Redis的速度比memcached快很多
